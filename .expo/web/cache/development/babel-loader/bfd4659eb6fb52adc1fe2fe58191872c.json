{"ast":null,"code":"import { React, useEffect } from 'react';\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { onAuthStateChanged, getAuth } from 'firebase/auth';\nimport firebaseConfig from \"../../../authBase\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchUser } from \"../../services/api\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction RtkQueryPage(_ref) {\n  var navigation = _ref.navigation;\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      u = _useSelector.u,\n      p = _useSelector.p;\n\n  var auth = getAuth(firebaseConfig);\n\n  var autoLogin = function autoLogin() {\n    onAuthStateChanged(auth, function (user) {\n      if (user) {\n        dispatch(fetchUser(user.email));\n        navigation.replace('Home');\n      } else {\n        navigation.replace('Login');\n      }\n    });\n  };\n\n  return _jsxs(View, {\n    style: stycles.Containter,\n    children: [_jsx(View, {\n      style: stycles.IMGContainer,\n      children: _jsx(Image, {\n        source: require(\"../../../assets/titleIMG.png\")\n      })\n    }), _jsxs(View, {\n      children: [_jsx(TouchableOpacity, {\n        style: stycles.button01,\n        onPress: autoLogin,\n        children: _jsx(Text, {\n          style: stycles.textStycleLogIn,\n          children: \"Login\"\n        })\n      }), _jsx(TouchableOpacity, {\n        style: stycles.button02,\n        onPress: function onPress() {\n          navigation.replace('Register');\n        },\n        children: _jsx(Text, {\n          style: stycles.textStycleSignUp,\n          children: \"Sign Up\"\n        })\n      })]\n    })]\n  });\n}\n\nvar stycles = StyleSheet.create({\n  Containter: {\n    position: 'relative',\n    width: 428,\n    height: 926,\n    backgroundColor: '#323C47'\n  },\n  IMGContainer: {\n    position: 'absolute',\n    width: 152,\n    height: 201,\n    left: 138,\n    top: 224\n  },\n  button01: {\n    position: 'absolute',\n    width: '70%',\n    height: 65,\n    left: 64,\n    top: 590,\n    backgroundColor: '#E04D3D',\n    borderRadius: 20\n  },\n  button02: {\n    position: 'absolute',\n    width: 300,\n    height: 65,\n    left: 64,\n    top: 690,\n    backgroundColor: '#198F94',\n    borderRadius: 20\n  },\n  textStycleLogIn: {\n    \"position\": \"absolute\",\n    \"left\": 125,\n    \"top\": 20,\n    color: '#FFFFFF',\n    fontWeight: 'bold',\n    fontSize: 20\n  },\n  textStycleSignUp: {\n    \"position\": \"absolute\",\n    \"left\": 115,\n    \"top\": 20,\n    color: '#FFFFFF',\n    fontWeight: 'bold',\n    fontSize: 20\n  }\n});\nexport default RtkQueryPage;","map":{"version":3,"names":["React","useEffect","onAuthStateChanged","getAuth","firebaseConfig","useDispatch","useSelector","fetchUser","RtkQueryPage","navigation","dispatch","state","user","u","p","auth","autoLogin","email","replace","stycles","Containter","IMGContainer","require","button01","textStycleLogIn","button02","textStycleSignUp","StyleSheet","create","position","width","height","backgroundColor","left","top","borderRadius","color","fontWeight","fontSize"],"sources":["/Users/tangweijia/Desktop/mobile/team2/frontend/src/pages/demo/index.js"],"sourcesContent":["import {React, useEffect} from 'react';\nimport { Image, StyleSheet, View, TouchableOpacity, Text } from 'react-native';\n// import { userApi } from '../../services/user';\nimport {\n  onAuthStateChanged,\n  getAuth,\n} from 'firebase/auth';\nimport firebaseConfig from '../../../authBase';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchUser } from '../../services/api';\n\nfunction RtkQueryPage({ navigation }) {\n  const dispatch = useDispatch();\n  const {u, p} = useSelector(state => state.user);\n  const auth = getAuth(firebaseConfig);\n  // console.log(u, p);\n\n\n  const autoLogin = () => {\n\n      onAuthStateChanged(auth, (user) => {\n        // 判断用户是否已经登录\n        if (user) {\n          // 发起请求，拿profile\n          dispatch(fetchUser(user.email));\n          // 先拿再跳\n          navigation.replace('Home');\n        } else {\n          navigation.replace('Login');\n        }\n      });\n  };\n\n\n\n  return (\n    <View style = {stycles.Containter}>\n\n      <View style = {stycles.IMGContainer}>\n        <Image source={require('../../../assets/titleIMG.png') } />\n      </View>\n\n      <View>\n        <TouchableOpacity\n         style={stycles.button01}\n         onPress = {autoLogin}\n         >\n          <Text style = {stycles.textStycleLogIn}>Login</Text>\n        </TouchableOpacity>\n\n        <TouchableOpacity \n          style={stycles.button02}\n          onPress = {() => {navigation.replace('Register');}}\n          >\n        <Text style = {stycles.textStycleSignUp}>Sign Up</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n\nconst stycles = StyleSheet.create({\n  Containter: {\n    position: 'relative',\n    width: 428,\n    height: 926,\n    backgroundColor: '#323C47',\n  },\n  IMGContainer: {\n    position: 'absolute',\n    width: 152,\n    height: 201,\n    left: 138,\n    top: 224,\n\n  },\n\n  button01: {\n    position: 'absolute',\n    width: '70%',\n    height: 65,\n    left: 64,\n    top: 590,\n\n    backgroundColor: '#E04D3D',\n    borderRadius: 20,\n  },\n\n  button02: {\n    position: 'absolute',\n    width: 300,\n    height: 65,\n    left: 64,\n    top: 690,\n\n    backgroundColor: '#198F94',\n    borderRadius: 20,\n  },\n\n\n  textStycleLogIn: {\n    \"position\": \"absolute\",\n    \"left\": 125,\n    \"top\": 20,\n    color: '#FFFFFF',\n\n    fontWeight: 'bold',\n    fontSize: 20,\n  },\n\n  textStycleSignUp: {\n    \"position\": \"absolute\",\n    \"left\": 115,\n    \"top\": 20,\n    color: '#FFFFFF',\n\n    fontWeight: 'bold',\n    fontSize: 20,\n  },\n\n\n});\n\nexport default RtkQueryPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}