{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { createSlice } from '@reduxjs/toolkit';\nimport { fetchUser, createUser } from \"../services/api\";\nvar userSlice = createSlice({\n  name: 'user',\n  initialState: {\n    u: '111',\n    p: '222',\n    avatar: \"\",\n    nickname: \"\"\n  },\n  reducers: {\n    setUsername: function setUsername(state, action) {\n      state.u = action.payload;\n    },\n    setP: function setP(state, action) {\n      state.p = action.payload;\n    }\n  },\n  extraReducers: function extraReducers(builder) {\n    builder.addCase(fetchUser.fulfilled, function (state, action) {\n      console.log(\"从服务器获取到的信息为：\", action.payload);\n\n      var _action$payload = _objectSpread({}, action.payload),\n          data = _action$payload.data;\n\n      var username = data.username;\n      state.u = username;\n    });\n    builder.addCase(createUser.fulfilled, function (state, action) {\n      var _action$payload2 = _objectSpread({}, action.payload),\n          data = _action$payload2.data;\n\n      console.log(data);\n      var avatar = data.avatar,\n          nickname = data.nickname;\n      state.avatar = avatar;\n      state.nickname = nickname;\n    });\n  }\n});\nexport default userSlice.reducer;\nvar _userSlice$actions = userSlice.actions,\n    setUsername = _userSlice$actions.setUsername,\n    setP = _userSlice$actions.setP;\nexport { setUsername, setP };","map":{"version":3,"names":["createSlice","fetchUser","createUser","userSlice","name","initialState","u","p","avatar","nickname","reducers","setUsername","state","action","payload","setP","extraReducers","builder","addCase","fulfilled","console","log","data","username","reducer","actions"],"sources":["/Users/tangweijia/Desktop/mobile/team2/frontend/src/slices/user.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport { fetchUser, createUser } from '../services/api';\n// Slice\nconst userSlice = createSlice({\n  name: 'user',\n  initialState: {\n    u: '111',\n    p: '222',\n    avatar: \"\",\n    nickname: \"\"\n  },\n  reducers: {\n    setUsername: (state, action) => {\n      state.u = action.payload;\n    },\n    setP: (state, action) => {\n      state.p = action.payload;\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(fetchUser.fulfilled, (state, action) => {\n      console.log(\"从服务器获取到的信息为：\", action.payload);\n      const { data } = {...action.payload}\n      const { username } = data;\n      // state.avatar = avatar;\n      // state.nickname = nickname;\n      state.u = username;\n    });\n    builder.addCase(createUser.fulfilled, (state, action) => {\n      const { data } = {...action.payload}\n      console.log(data);\n      const {avatar, nickname} = data;\n      state.avatar = avatar;\n      state.nickname = nickname;\n    });\n  }\n});\nexport default userSlice.reducer;\nexport const { setUsername, setP } = userSlice.actions;\n"],"mappings":";;;;;;AAAA,SAASA,WAAT,QAA4B,kBAA5B;AACA,SAASC,SAAT,EAAoBC,UAApB;AAEA,IAAMC,SAAS,GAAGH,WAAW,CAAC;EAC5BI,IAAI,EAAE,MADsB;EAE5BC,YAAY,EAAE;IACZC,CAAC,EAAE,KADS;IAEZC,CAAC,EAAE,KAFS;IAGZC,MAAM,EAAE,EAHI;IAIZC,QAAQ,EAAE;EAJE,CAFc;EAQ5BC,QAAQ,EAAE;IACRC,WAAW,EAAE,qBAACC,KAAD,EAAQC,MAAR,EAAmB;MAC9BD,KAAK,CAACN,CAAN,GAAUO,MAAM,CAACC,OAAjB;IACD,CAHO;IAIRC,IAAI,EAAE,cAACH,KAAD,EAAQC,MAAR,EAAmB;MACvBD,KAAK,CAACL,CAAN,GAAUM,MAAM,CAACC,OAAjB;IACD;EANO,CARkB;EAgB5BE,aAAa,EAAE,uBAACC,OAAD,EAAa;IAC1BA,OAAO,CAACC,OAAR,CAAgBjB,SAAS,CAACkB,SAA1B,EAAqC,UAACP,KAAD,EAAQC,MAAR,EAAmB;MACtDO,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BR,MAAM,CAACC,OAAnC;;MACA,wCAAqBD,MAAM,CAACC,OAA5B;MAAA,IAAQQ,IAAR,mBAAQA,IAAR;;MACA,IAAQC,QAAR,GAAqBD,IAArB,CAAQC,QAAR;MAGAX,KAAK,CAACN,CAAN,GAAUiB,QAAV;IACD,CAPD;IAQAN,OAAO,CAACC,OAAR,CAAgBhB,UAAU,CAACiB,SAA3B,EAAsC,UAACP,KAAD,EAAQC,MAAR,EAAmB;MACvD,yCAAqBA,MAAM,CAACC,OAA5B;MAAA,IAAQQ,IAAR,oBAAQA,IAAR;;MACAF,OAAO,CAACC,GAAR,CAAYC,IAAZ;MACA,IAAOd,MAAP,GAA2Bc,IAA3B,CAAOd,MAAP;MAAA,IAAeC,QAAf,GAA2Ba,IAA3B,CAAeb,QAAf;MACAG,KAAK,CAACJ,MAAN,GAAeA,MAAf;MACAI,KAAK,CAACH,QAAN,GAAiBA,QAAjB;IACD,CAND;EAOD;AAhC2B,CAAD,CAA7B;AAkCA,eAAeN,SAAS,CAACqB,OAAzB;AACO,yBAA8BrB,SAAS,CAACsB,OAAxC;AAAA,IAAQd,WAAR,sBAAQA,WAAR;AAAA,IAAqBI,IAArB,sBAAqBA,IAArB"},"metadata":{},"sourceType":"module"}